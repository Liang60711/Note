# 資料庫物件
資料庫物件是資料庫中的各種元素，用於組織和儲存資料、管理資料庫結構以及執行各種操作。這些物件可讓您定義資料表、檢視、索引、預存程序、觸發器和其他資料庫元素。以下是一些常見的SQL資料庫對象

1. 表（Table）：表格是SQL資料庫中最常見的物件之一，用於儲存資料。每個表由行和列組成，每列定義了表中儲存的資料的類型。 

2. 檢視（View）：也稱視圖，是一個虛擬表，它是基於一個或多個實際表的查詢結果，允許使用者以表的形式存取和查詢數據，但不包含實際的數據。 

3. 索引（Index）：索引是一種最佳化資料檢索的結構，它可以加速查詢操作。索引通常基於表的一個或多個列，並允許快速查找和排序資料。

4. 預存程序（Stored Procedure）：預存程序是一組SQL語句的集合，它們可以被多次呼叫以執行特定的任務或操作。預存程序通常用於封裝常見的業務邏輯。 

5. 觸發器（Trigger）：觸發器是與資料表相關的特殊類型的預存程序，它們在特定事件（如插入、更新或刪除資料）發生時會自動觸發。 

6. 函數（Function）：函數是一個可以接受參數並傳回值的可重複使用程式碼區塊。在SQL中，函數可以用來執行各種運算和資料處理任務。

7. 約束（Constraint）：約束是用來確保資料完整性和一致性的規則，包括主鍵約束、外鍵約束、唯一約束、檢查約束等。 

8. 序列（Sequence）：序列是產生唯一值的資料庫對象，通常用於自動建立主鍵值。 

9. 使用者（User）：使用者是資料庫中的標識，它們用於控制資料庫存取權限和安全性。 

10. 角色（Role）：角色是一組權限，可以指派給用戶，從而簡化權限管理。

11. 數據字典 : 就是系統表，存放資料庫相關信息的表，系統表的資料通常由資料庫系統維護，不應該修改，只可查看。


</br>

</br>

# 視圖 / 檢視 / View

### 概述

1. 解決什麼問題 : 
    
    * 視圖可以幫助我們使用表的一部分(只顯示某欄位或某數據)，而不是所有的表(效能)。
    
    * 可以針對不同的用戶制定不同的查詢視圖(權限管理)。

2. 視圖是一種`虛擬表`，`本身沒有真正的數據`，真正的數據還是存在資料表中，占用的內存很少。

3. 視圖建立在已建立資料表的基礎上，`所以當資料表數據發生改變時，視圖也會更改`。

4. 反之，`對視圖進行 CREATE、UPDATE、DELETE 操作時，資料表的數據也會更改`，因為視圖數據的refernce也都是資料表裡面的數據。

5. 視圖本身的刪除，不會對資料表有影響。

6. 可以將視圖理解為 `存儲起來的SELECT語句`，小型的資料表可以不使用視圖，但大型資料表中，表較複雜，視圖的價值就出現了，可以將經常查詢的結果放到視圖虛擬表中，提升使用效率。

### 視圖創建 CREATE

在 `CREATE VIEW` 語句中嵌入子查詢
```sql
CREATE VIEW 視圖名稱 [(欄位別名)]
AS 查詢語句
-- [WITH [CASCADE|LOCAL] CHECK OPTION]
```

```sql
-- 創建
CREATE VIEW view1
AS 
SELECT * FROM `new_order`;
```

```sql
-- view 的欄位名稱可以使用 alias
-- 方法1: 寫在子查詢
CREATE VIEW view2
AS (
    SELECT user_id u_id,
           total_amount amount
    FROM `new_order`
);

-- 方法2: 拉出來寫，兩者等價
CREATE VIEW view2 (u_id, amount)
AS (
    SELECT user_id,
           total_amount 
    FROM `new_order`
);
```

```sql
-- 子查詢使用 WHERE 來篩選可以看到的數據
CREATE VIEW view3
AS (
    SELECT * FROM `new_order`
    WHERE total_amount  > 10000
);
```

```sql
-- group by
CREATE VIEW view4
AS (
    SELECT user_id, AVG(total_amount)
    FROM `new_order`
    GROUP BY user_id
);
```

<br/>

<br/>

### 視圖查看 SELECT
有4種方法

1. `SHOW TABLES` : 查看所有 TABLE 及 VIEW

2. `DESC view_name`: 查看單一視圖

3. `SHOW TABLE STATUS LIKE 'view_name'` : 查看視圖屬性資訊，如果在 cmd 中，可以加上 \G，倒置查看，`SHOW TABLE STATUS LIKE 'view_name'\G`。

4. `SHOW CREATE VIEW view_name` : 查看詳細資訊

<br/>

<br/>

### 視圖修改 UPDATE

準確來說，是修改是圖中的數據，同樣是使用 UPDATE 語法，當視圖修改時，資料表也會一併修改，反之亦然。
```sql
UPDATE view_name
SET salary = 10000
WHERE employee_id = 101;
```

<br/>

<br/>
